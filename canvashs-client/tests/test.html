<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Jasmine Spec Runner</title>

  <link rel="shortcut icon" type="image/png" href="../../lib/jasmine/images/jasmine_favicon.png">

  <link rel="stylesheet" type="text/css" href="../../lib/jasmine/lib/jasmine-core/jasmine.css">
  <script type="text/javascript" src="../../lib/jasmine/lib/jasmine-core/jasmine.js"></script>
  <script type="text/javascript" src="../../lib/jasmine/lib/jasmine-core/jasmine-html.js"></script>
  <script type="text/javascript" src="../../lib/js-imagediff/imagediff.js"></script>

  <!-- include spec files here... -->
  <!--<script type="text/javascript" src="spec/specfile.js"></script>-->
  <script type="text/javascript" src="spec/DrawSpec.js"></script>

  <!-- include source files here... -->
  <!--  <script type="text/javascript" src="javascript/file"></script> -->
  <script type="text/javascript" src="../js/jquery.js"></script>
  <script type="text/javascript" src="../js/mousewheel.js"></script>
  <script type="text/javascript" src="../js/kinetic.js"></script>
  <script type="text/javascript" src="../js/main.js" data-cover></script>
  <script type="text/javascript" src="../js/utils.js"></script>

  <!-- Code coverage tools -->
  <script type="text/javascript" src="../../lib/blanket/dist/qunit/blanket.js"></script>
  <script type="text/javascript" src="../../lib/blanket/src/adapters/jasmine-blanket.js"></script>
  <script type="text/javascript" src="../../lib/blanket/test/helpers/console_runner.js"></script>

  <script type="text/javascript">
    (function () {
          var currentWindowOnload = window.onload;
          window.onload = function() {
              if (currentWindowOnload) {
                  currentWindowOnload();
              }
              if(typeof jasmine === 'undefined' || typeof blanket === 'undefined') {
                  document.getElementById("testInstructions").style.display = "block";
              }
              try {
              _blanket.utils.getFile(
                _blanket.utils.qualifyURL("../js/main.js"),
                function() {}, 
                function(){
                }
              );

              } catch(e) {
                // Show instructions how to use code coverage
                $("#codeCoverageInstructions").css('display',"block");
                $("body").addClass('hideBlanket');
              }
          
          };
          window.blanketTestJasmineExpected=1;
          
          var jasmineEnv = jasmine.getEnv();
          jasmineEnv.updateInterval = 1000;
          
          var trivialReporter = new jasmine.TrivialReporter();
          
          jasmineEnv.addReporter(trivialReporter);
          
          jasmineEnv.specFilter = function(spec) {
              return trivialReporter.specFilter(spec);
          };
          
          /* this is just for our automated tests */
          window.jasmine_phantom_reporter = new jasmine.ConsoleReporter;
          
          jasmineEnv.addReporter(jasmine_phantom_reporter);
          /*   */
          
          jasmineEnv.specFilter = function (spec) {
              return trivialReporter.specFilter(spec);
          };
          
          
          function execJasmine() {
              jasmineEnv.execute();
          }

    })();
  </script>

  <style>
    body {
      margin: 0px;
    }
    #TrivialReporter {
      position: relative;
    }
    #testInstructions, #codeCoverageInstructions {
      padding: 20px;
      display: none;
    }
    .hideBlanket #blanket-main {
      display: none;
    }
  </style>

</head>

<body>
  <div id="testInstructions">
    To run tests and see code coverage you first have to install the required libraries. This can be done using either "runhaskell tests/SetupTests.hs" or "cabal install --enable-tests & cabal test" in the root of the Canvas.hs project.
  </div>
  <div id="codeCoverageInstructions">
    Code coverage is disabled. To enable:<br />
    <ul>
      <li><strong>Chrome:</strong> Run chrome using: chrome.exe --disable-web-security</li>
      <li><strong>Firefox:</strong> Follow these instructions: <a href="http://kb.mozillazine.org/Links_to_local_pages_do_not_work">Links to local pages do not work</a>.</li>
      <li><strong>Other:</strong> Enable cross origin requests in your browser.</li>
    </ul>
  </div>
</body>
</html>
